<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸŽµ Spelling Bee</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Verdana, sans-serif;
      background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px 0;
    }

    .container {
      background: #fff;
      border-radius: 24px;
      box-shadow: 0 24px 60px rgba(0, 0, 0, 0.25);
      padding: 40px;
      max-width: 800px;
      width: 100%;
      margin: 0 auto;
      padding-bottom: 80px; /* Space for fixed footer */
    }

    h1 {
      text-align: center;
      color: #4a5568;
      margin-bottom: 28px;
      font-weight: 700;
      font-size: 2.2rem;
    }

    .filter-section,
    .player-section {
      background: #f9fbfd;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      border: 1px solid #edf2f7;
    }

    .spelling-controls-section {
      background: #f9fbff;
      padding: 28px;
      border-radius: 16px;
      margin-top: 20px;
      border: 1px solid #e2e8f0;
    }

    label {
      font-weight: 600;
      display: block;
      margin-bottom: 8px;
      color: #2d3748;
      font-size: 0.95rem;
    }

    input, textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e2e8f0;
      border-radius: 10px;
      font-size: 1rem;
      transition: border-color 0.2s;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    textarea { min-height: 80px; }

    .filter-row {
      display: flex;
      gap: 12px;
      margin-bottom: 18px;
    }

    .button-group {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin: 24px 0;
    }

    button {
      padding: 13px 16px;
      border: none;
      border-radius: 12px;
      font-weight: 600;
      cursor: pointer;
      color: #fff;
      font-size: 1rem;
      transition: transform 0.15s, opacity 0.15s;
    }

    button:hover {
      transform: translateY(-2px);
      opacity: 0.95;
    }

    .btn-primary { background: #667eea; }
    .btn-success { background: #28a745; }
    .btn-danger  { background: #e53e3e; }

    .song-title {
      font-size: 2.4em;
      text-align: center;
      margin-bottom: 20px;
      color: #2d3748;
      font-weight: 700;
    }

    .song-emoji {
      font-size: 5em;
      text-align: center;
      margin-bottom: 20px;
    }

    audio {
      width: 100%;
      max-width: 480px;
      display: block;
      margin: 0 auto;
      margin-top: 12px;
    }

    /* Modern checkbox */
    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 12px;
      margin: 0;
      padding: 0;
      justify-content: flex-start;
    }

    .checkbox-group input[type="checkbox"] {
      appearance: none;
      width: 22px;
      height: 22px;
      border: 2px solid #cbd5e0;
      border-radius: 6px;
      cursor: pointer;
      position: relative;
      transition: all 0.2s;
    }

    .checkbox-group input[type="checkbox"]:checked {
      background: #667eea;
      border-color: #667eea;
    }

    .checkbox-group input[type="checkbox"]:checked::after {
      content: "âœ“";
      position: absolute;
      color: white;
      font-size: 14px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .checkbox-group label {
      margin: 0;
      font-weight: 600;
      color: #2d3748;
      cursor: pointer;
    }

    .message {
      padding: 14px;
      border-radius: 10px;
      margin: 16px 0;
      text-align: center;
      font-weight: 500;
    }

    .info { background: #d1ecf1; color: #0c5460; }
    .success { background: #d4edda; color: #155724; }
    .warning { background: #fff3cd; color: #856404; }

    .stats {
      display: flex;
      justify-content: space-around;
      background: #f8fafc;
      border-radius: 14px;
      padding: 20px;
      border: 1px solid #edf2f7;
      margin-top: 12px;
    }

    .stat-number {
      font-size: 1.7em;
      font-weight: 800;
      color: #4a5568;
    }

    .hidden { display: none !important; }

    /* Footer */
    .footer {
      background: #1a202c;
      color: white;
      padding: 0.8rem 0;
      width: 100%;
      position: fixed;
      bottom: 0;
      left: 0;
      overflow: hidden;
      font-size: 1.25rem; /* Ajustado para mejor legibilidad */
      text-align: center;
      z-index: 1000;
    }

    .ticker-content {
      display: inline-block;
      white-space: nowrap;
      padding-left: 100%;
      animation: ticker 80s linear infinite;
    }

    @keyframes ticker {
      from { transform: translateX(0); }
      to   { transform: translateX(-100%); }
    }

    /* Responsive */
    @media (max-width: 600px) {
      .container {
        padding: 30px 20px;
        padding-bottom: 100px;
      }

      h1 {
        font-size: 1.8rem;
      }

      .filter-row {
        flex-direction: column;
        gap: 10px;
      }

      .button-group {
        grid-template-columns: 1fr;
      }

      .song-title {
        font-size: 2rem;
      }

      .song-emoji {
        font-size: 4em;
      }
    }
  </style>
</head>

<body>

<div class="container">
<h1>ðŸŽµ Spelling Bee</h1>

<div class="filter-section">
  <label>Letter Range</label>
  <div class="filter-row">
    <input type="number" id="rangeFrom" value="1">
    <input type="number" id="rangeTo" value="15">
  </div>

  <label>Exact Words (comma or line break)</label>
  <textarea id="specificWords"></textarea>

  <div class="button-group">
    <button class="btn-primary" onclick="applyFilters()">Load Words</button>
  </div>
</div>

<div class="spelling-controls-section">
  <div class="checkbox-group">
    <input type="checkbox" id="hideTitle" onchange="toggleSpellingMode()">
    <label for="hideTitle">Spelling Mode</label>
  </div>

  <div id="messageContainer"></div>

  <div id="playerSection" class="player-section hidden">
    <div id="emoji" class="song-emoji hidden">ðŸ˜Š</div>
    <div id="wordText" class="song-title"></div>
    <audio id="audioPlayer" controls></audio>
  </div>

  <div class="button-group">
    <button class="btn-success" onclick="playNextWord()">Next</button>
    <button class="btn-danger" onclick="resetGame()">Reset</button>
  </div>
</div>

<div class="stats">
  <div><div id="totalWords" class="stat-number">0</div>Total</div>
  <div><div id="playedCount" class="stat-number">0</div>Played</div>
  <div><div id="remainingWords" class="stat-number">0</div>Remaining</div>
</div>
</div>

<div class="footer">
  <div class="ticker-content">
    Monthly Values â€¢ Respect â€¢ Responsibility â€¢ Teacher: Wilfran L. Decena
  </div>
</div>

<script>
const rangeFrom = document.getElementById('rangeFrom');
const rangeTo = document.getElementById('rangeTo');
const specificWords = document.getElementById('specificWords');
const playerSection = document.getElementById('playerSection');
const wordText = document.getElementById('wordText');
const emoji = document.getElementById('emoji');
const audioPlayer = document.getElementById('audioPlayer');
const messageContainer = document.getElementById('messageContainer');
const totalWords = document.getElementById('totalWords');
const playedCount = document.getElementById('playedCount');
const remainingWords = document.getElementById('remainingWords');
const hideTitle = document.getElementById('hideTitle');

let allWords = [];
let filteredWords = [];
let playedWords = [];
let currentWord = null;

async function loadWordList(){
  try{
    const res = await fetch('Words/words.csv');
    const text = await res.text();
    allWords = [...new Set(text.split(/[,\n\r]+/).map(w=>w.trim()).filter(Boolean))];
  }catch{
    showMessage('âŒ words.csv not found','warning');
  }
}

function applyFilters(){
  playedWords = [];
  const manual = specificWords.value.trim();

  if(manual){
    filteredWords = [...new Set(
      manual.split(/[\n,]+/).map(w=>w.trim()).filter(Boolean)
    )];
  }else{
    const min = +rangeFrom.value || 1;
    const max = +rangeTo.value || 99;
    filteredWords = allWords.filter(w=>w.length>=min && w.length<=max);
  }

  if(!filteredWords.length){
    showMessage('âš ï¸ No valid words','warning');
    return;
  }

  playerSection.classList.remove('hidden');
  playNextWord();
  updateStats();
}

function playNextWord(){
  const remaining = filteredWords.filter(w=>!playedWords.includes(w));
  if(!remaining.length){
    showMessage('ðŸŽ‰ Finished!','success');
    return;
  }
  currentWord = remaining[Math.floor(Math.random()*remaining.length)];
  playedWords.push(currentWord);
  renderWord();
  updateStats();
}

function renderWord(){
  wordText.textContent = currentWord;
  wordText.classList.toggle('hidden',hideTitle.checked);
  emoji.classList.toggle('hidden',!hideTitle.checked);
  audioPlayer.src = `Words/${encodeURIComponent(currentWord)}.mp3`;
  audioPlayer.play().catch(()=>{});
}

function toggleSpellingMode(){
  if(!currentWord) return;
  renderWord();
}

function resetGame(){
  filteredWords=[];
  playedWords=[];
  playerSection.classList.add('hidden');
  updateStats();
}

function updateStats(){
  totalWords.textContent = filteredWords.length;
  playedCount.textContent = playedWords.length;
  remainingWords.textContent = filteredWords.length-playedWords.length;
}

function showMessage(msg,type){
  messageContainer.innerHTML = `<div class="message ${type}">${msg}</div>`;
}

document.addEventListener('DOMContentLoaded',loadWordList);
</script>

</body>
</html>
